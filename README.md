# 預かり金管理Webアプリ

介護法人向けの預かり金管理システムです。

## 技術スタック

- Next.js 14 (App Router)
- TypeScript
- Prisma (SQLite)
- Tailwind CSS

## セットアップ

1. 依存関係のインストール
```bash
npm install
```

2. 環境変数の設定

`.env`ファイルをプロジェクトのルートディレクトリに作成し、以下の内容を記述してください：

```
DATABASE_URL="file:./prisma/dev.db"
```

**作成方法（3つの方法から選べます）：**

**方法1: ターミナルで作成**
```bash
echo 'DATABASE_URL="file:./prisma/dev.db"' > .env
```

**方法2: .env.exampleをコピー**
```bash
cp .env.example .env
```

**方法3: 手動で作成**
- プロジェクトルートに`.env`という名前のファイルを新規作成
- 上記の内容をコピー&ペーストして保存

3. データベースの初期化
```bash
npx prisma generate
npx prisma db push
```

4. 開発サーバーの起動
```bash
npm run dev
```

ブラウザで http://localhost:3000 にアクセスしてください。

## 初期データのインポート

1. ExcelからCSV形式でデータをエクスポート
   - 列: 施設名, ユニット名, 利用者名, 残高
2. サイドバーから「データインポート」を選択
3. CSVデータを貼り付けてインポート実行

## 機能

### D01: 法人ダッシュボード
- 法人全体の預かり金合計表示
- 各施設の合計金額をカード表示
- 施設へのリンク

### F01: 施設詳細画面
- 施設合計カード
- ユニット別合計カード
- 利用者別残高カード
- ユニットで絞り込み可能

### U01: 利用者詳細画面
- 利用者名と現在残高
- 明細テーブル
- 入金・出金機能（当月のみ）
- 訂正入力機能（過去月のみ）

### P01: まとめて印刷画面
- 対象年月選択
- 印刷単位選択
- 明細含む/含まない選択

### M01: マスタ管理画面
- 施設マスタ
- ユニットマスタ
- 利用者マスタ

## データベース

SQLiteを使用しています。データベースファイルは `prisma/dev.db` に作成されます。

Prisma Studioでデータを確認できます：
```bash
npm run db:studio
```

