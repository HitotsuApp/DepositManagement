# 預り金管理システム テスト計画書

## 1. テスト目的

本システムの品質を確保し、バグを早期に発見・修正することを目的として、以下の観点からテストを実施します。

- 機能要件の充足確認
- データ整合性の確認
- UI/UXの動作確認
- エラーハンドリングの確認
- パフォーマンスの確認

## 2. テスト対象システム

### 2.1 システム概要
- システム名: 預り金管理Webアプリ
- 技術スタック: Next.js 14 (App Router), TypeScript, Prisma (SQLite), Tailwind CSS
- 対象ユーザー: 介護法人の職員

### 2.2 主要機能
1. **D01: 法人ダッシュボード**
   - 法人全体の預り金合計表示
   - 各施設の合計金額をカード表示
   - 施設へのリンク

2. **F01: 施設詳細画面**
   - 施設合計カード
   - ユニット別合計カード
   - 利用者別残高カード
   - ユニットで絞り込み可能

3. **U01: 利用者詳細画面**
   - 利用者名と現在残高
   - 明細テーブル
   - 入金・出金機能（当月のみ）
   - 訂正入力機能（過去月のみ）

4. **P01: まとめて印刷画面**
   - 対象年月選択
   - 印刷単位選択
   - 明細含む/含まない選択

5. **M01: マスタ管理画面**
   - 施設マスタ
   - ユニットマスタ
   - 利用者マスタ

6. **その他機能**
   - データインポート機能
   - 一括入力機能
   - 現金確認機能

## 3. テスト範囲

### 3.1 テスト対象
- フロントエンド（Reactコンポーネント）
- バックエンド（APIルート）
- データベース操作（Prisma）
- 残高計算ロジック
- UI/UXの動作

### 3.2 テスト対象外
- 本番環境でのパフォーマンステスト（開発環境での簡易確認のみ）
- セキュリティテスト（認証・認可機能は未実装のため）
- ブラウザ互換性テスト（主要ブラウザのみ）

## 4. テスト環境

### 4.1 開発環境
- OS: macOS (darwin 24.6.0)
- Node.js: バージョン確認が必要
- データベース: SQLite (prisma/dev.db)
- ブラウザ: Chrome/Edge/Safari

### 4.2 テストデータ
- 初期データ: インポート機能で作成
- テスト用施設・ユニット・利用者データ
- テスト用取引データ

## 5. テスト実施方法

### 5.1 テストタイプ
- **機能テスト**: 各機能が仕様通りに動作するか確認
- **統合テスト**: 複数機能の連携が正常に動作するか確認
- **回帰テスト**: 既存機能が新規変更により影響を受けていないか確認
- **エッジケーステスト**: 境界値や異常系の動作確認

### 5.2 テスト手順
1. テスト環境のセットアップ
2. テストデータの準備
3. 各テスト項目の実行
4. 結果の記録
5. バグの報告と修正確認

## 6. テスト項目

詳細なテスト項目は `TEST_ITEMS.md` を参照してください。

主要なテストカテゴリ:
- 施設選択機能
- ダッシュボード表示
- 施設詳細画面
- 利用者詳細画面
- 取引登録（入金・出金・訂正入力）
- 残高計算
- マスタ管理
- データインポート
- 一括入力
- 印刷機能
- エラーハンドリング

## 7. テスト結果の記録

テスト結果は `TEST_RESULTS.md` に記録します。

記録項目:
- テスト項目ID
- テスト結果（PASS/FAIL/SKIP）
- 発見されたバグの詳細
- 修正状況
- 備考

## 8. バグ管理

### 8.1 バグの分類
- **Critical**: システムが使用不能になる重大なバグ
- **High**: 主要機能が動作しないバグ
- **Medium**: 機能は動作するが、期待通りでないバグ
- **Low**: 軽微な問題やUIの改善点

### 8.2 バグ修正の優先順位
1. Critical → High → Medium → Low の順
2. ユーザー影響度の高い機能から優先

## 9. テストスケジュール

- **準備**: テスト計画・項目作成
- **実行**: 各機能のテスト実施
- **結果まとめ**: テスト結果の記録と分析
- **修正確認**: 発見されたバグの修正確認

## 10. テスト完了基準

以下の条件を満たした場合、テストを完了とします。

- すべてのCritical/Highバグが修正されている
- 主要機能が正常に動作する
- データ整合性が保たれている
- エラーハンドリングが適切に実装されている
